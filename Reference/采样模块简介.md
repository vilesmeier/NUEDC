# 电流电压采样模块设计
本文档简要介绍电流电压采样模块的设计要求与方案  

## 主流电流采样方案  
电流采样方案主要有三种：霍尔电流传感器/电流感应放大器/互感器  
霍尔电流传感器：利用霍尔效应，外围电路简单  
电流感应放大器：实际上为大放大倍数的差分放大器，采样精准  
互感器：隔离效果极佳，采样效果稀烂  

一般直流电流用运放，交流电流用霍尔，采用高端采样的方式。  

## 主流电压采样方案
电压采样的方案主要有两种：运放/互感器  
运放：电阻分压，差分采样，精准，隔离能力较弱  
互感器：隔离效果极佳，采样效果稀烂  

一般都使用运放差分采样。  

## 参数与选型
### 常用芯片
电压采样运放： INA149  
电流采样运放： INA240/INA241  
霍尔电流传感器： CC6902/ACS712  
互感器：ZMPT103/ZMPT101  
参考源： REF2030  

### 选型
运放考虑：放大倍数，引脚定义（涉及到通用性问题），共模输入范围，差模输入范围，供电电压  
霍尔：灵敏度，供电电压，量程  

### 参考源
部分芯片具有参考电压输入端，可以实现输出直流偏置，对于单电源系统/片内AD十分友好。所以参考源可以优先选用双电压输出（VCC+1/2VCC），单芯片提供参考+偏置双电压。  
同时部分运放（INA240）也自带对参考电压1/2分压，输入参考电平即可添加1/2的直流偏置。  
在常规使用中，参考源的精度一般够用，只需要考虑使用的便捷性即可。

## 采样模块的附加功能
在部分情况下，采样模块可以配合片内外设，对相当一部分的软件功能实现替代。通过将部分软件功能下放到硬件，我们可以进一步提高单片机的算力。  

### 过零比较

### 窗口比较器

### 硬件功率因数

### 硬件保护（Trip Zone）






